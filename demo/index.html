<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>vmSwipe: demo</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/core.css">
  <link rel="stylesheet" href="css/user.css">
  <!-- Styles -->
</head>
<body>
<div class="swipe-block">
  <div class="vm-swipe">
    <div class="block th01">
      <span>#1 Lorem ipsum</span>
    </div>
    <div class="block th02">
      <span>#2 Lorem ipsum dolor</span>
    </div>
    <div class="block double-width th03">
      <span>#3 Sapiente similique sit</span>
    </div>
    <div class="block th04">
      <span>#4 Lorem ipsum dolor</span>
    </div>
  </div>
</div>

<div class="controls-block">
  <div class="swipe-methods-block info-block">
    <div class="swipe-methods-inner-wrapper info-block-inner-wrapper">
      <div class="swipe-methods-header info-block-header info-block-header-th1"><span>Methods</span></div>
      <button id="init" class="mtd mtd-th1" disabled>Init</button>
      <button id="destroy" class="mtd mtd-th1">Destroy</button>
      <button id="refresh" class="mtd mtd-th1">Refresh</button>
    </div>
  </div>
  <div class="swipe-update-block info-block">
    <div class="swipe-update-inner-wrapper info-block-inner-wrapper">
      <div class="swipe-methods-header info-block-header info-block-header-th2"><span>Update block</span></div>
      <button id="add" class="mtd mtd-th2">Add items</button>
      <button id="remove" class="mtd mtd-th2">Remove items</button>
    </div>
  </div>
</div>

<!--Scripts-->
<script src="js/jquery-2.2.4.min.js"></script>
<script src="js/main.js"></script>
<script>
  $( function(){
    $( '.vm-swipe' ).vmSwipe();
  
    // Init
    $( '#init' ).on( 'click', function(){
      $( '.vm-swipe' ).vmSwipe();
      
      changeAttr( [$( '#destroy' ), $( '#add' ), $( '#refresh' ), $( '#remove' )], 'disabled', false );
      changeAttr( [$( this )], 'disabled', true );
    });
    
    // Destroy
    $( '#destroy' ).on( 'click', function(){
      $( '.vm-swipe' ).vmSwipe( 'destroy' );
      
      changeAttr( [$( '#init' )], 'disabled', false );
      changeAttr( [$( this ), $( '#add' ), $( '#refresh' ), $( '#remove' )], 'disabled', true );
    });
    
    // Refresh
    $( '#refresh' ).on( 'click', function(){
      $( '.vm-swipe' ).vmSwipe( 'refresh' );
    });
    
    // Add item
    $( '#add' ).on( 'click', function(){
      addItem( $( '.block' ) );
    });
    function addItem( itemForClone ){
      if( !itemForClone.length ) alert( 'Nothing to add' );
      
      var string = '#' + ( itemForClone.length + 1 ) + ' New item',
          newItem = itemForClone.last().clone();
      
      itemForClone.parent().append( newItem );
      newItemText( newItem, string );
    }
    function newItemText( newItem, string ){
      newItem.find( 'span' ).html( string );
    }
    
    // Remove item
    $( '#remove' ).on( 'click', function(){
      removeItem( $( '.block' ) );
    });
    function removeItem( itemForRemove ){
      if( !itemForRemove.length ) alert( 'Nothing to remove' );
      itemForRemove.last().remove();
    }
    
    function changeAttr( array, attr, bool ){
      for( var i = 0, l = array.length; i < l; i++ ){
        array[i].attr( attr, bool );
      }
    }
  });
</script>
<!--Scripts-->
</body>
</html>